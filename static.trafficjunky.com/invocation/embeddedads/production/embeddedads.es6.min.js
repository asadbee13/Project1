! function(e, t) {
    "object" == typeof exports && "object" == typeof module ? module.exports = t() : "function" == typeof define && define.amd ? define("JS Ads for Publishers", [], t) : "object" == typeof exports ? exports["JS Ads for Publishers"] = t() : e["JS Ads for Publishers"] = t()
}(self, (function() {
    return function() {
        var e = {
                808: function(e, t, n) {
                    var i, r;
                    ! function(s) {
                        if (void 0 === (r = "function" == typeof(i = s) ? i.call(t, n, t, e) : i) || (e.exports = r), !0, e.exports = s(), !!0) {
                            var o = window.Cookies,
                                a = window.Cookies = s();
                            a.noConflict = function() {
                                return window.Cookies = o, a
                            }
                        }
                    }((function() {
                        function e() {
                            for (var e = 0, t = {}; e < arguments.length; e++) {
                                var n = arguments[e];
                                for (var i in n) t[i] = n[i]
                            }
                            return t
                        }

                        function t(e) {
                            return e.replace(/(%[0-9A-Z]{2})+/g, decodeURIComponent)
                        }
                        return function n(i) {
                            function r() {}

                            function s(t, n, s) {
                                if ("undefined" != typeof document) {
                                    "number" == typeof(s = e({
                                        path: "/"
                                    }, r.defaults, s)).expires && (s.expires = new Date(1 * new Date + 864e5 * s.expires)), s.expires = s.expires ? s.expires.toUTCString() : "";
                                    try {
                                        var o = JSON.stringify(n);
                                        /^[\{\[]/.test(o) && (n = o)
                                    } catch (e) {}
                                    n = i.write ? i.write(n, t) : encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent), t = encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent).replace(/[\(\)]/g, escape);
                                    var a = "";
                                    for (var l in s) s[l] && (a += "; " + l, !0 !== s[l] && (a += "=" + s[l].split(";")[0]));
                                    return document.cookie = t + "=" + n + a
                                }
                            }

                            function o(e, n) {
                                if ("undefined" != typeof document) {
                                    for (var r = {}, s = document.cookie ? document.cookie.split("; ") : [], o = 0; o < s.length; o++) {
                                        var a = s[o].split("="),
                                            l = a.slice(1).join("=");
                                        n || '"' !== l.charAt(0) || (l = l.slice(1, -1));
                                        try {
                                            var d = t(a[0]);
                                            if (l = (i.read || i)(l, d) || t(l), n) try {
                                                l = JSON.parse(l)
                                            } catch (e) {}
                                            if (r[d] = l, e === d) break
                                        } catch (e) {}
                                    }
                                    return e ? r[e] : r
                                }
                            }
                            return r.set = s, r.get = function(e) {
                                return o(e, !1)
                            }, r.getJSON = function(e) {
                                return o(e, !0)
                            }, r.remove = function(t, n) {
                                s(t, "", e(n, {
                                    expires: -1
                                }))
                            }, r.defaults = {}, r.withConverter = n, r
                        }((function() {}))
                    }))
                }
            },
            t = {};

        function n(i) {
            var r = t[i];
            if (void 0 !== r) return r.exports;
            var s = t[i] = {
                exports: {}
            };
            return e[i](s, s.exports, n), s.exports
        }
        n.n = function(e) {
            var t = e && e.__esModule ? function() {
                return e.default
            } : function() {
                return e
            };
            return n.d(t, {
                a: t
            }), t
        }, n.d = function(e, t) {
            for (var i in t) n.o(t, i) && !n.o(e, i) && Object.defineProperty(e, i, {
                enumerable: !0,
                get: t[i]
            })
        }, n.o = function(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t)
        }, n.r = function(e) {
            "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
                value: "Module"
            }), Object.defineProperty(e, "__esModule", {
                value: !0
            })
        };
        var i = {};
        return function() {
            "use strict";
            var e, t, r, s;
            n.r(i),
                function(e) {
                    e.popunderTriggered = "popunderTriggered", e.embeddedAdsLoaded = "embeddedAdsLoaded", e.embeddedAdsError = "embeddedAdsError", e.embeddedAdsSpotLoaded = "embeddedAdsSpotLoaded", e.embeddedAdsSpotFailed = "embeddedAdsSpotFailed", e.embeddedAdsSpotDefaultLoaded = "embeddedAdsSpotDefaultLoaded", e.embeddedAdsDebuggerUpdate = "embeddedAdsDebuggerUpdate"
                }(e || (e = {})),
                function(e) {
                    e[e.Low = 99] = "Low", e[e.Medium = 550] = "Medium", e[e.High = 720] = "High", e[e.VeryHight = 1080] = "VeryHight"
                }(t || (t = {})),
                function(e) {
                    e.site_id = "site_id", e.hb_guid = "hc", e.version = "t_version", e.platform = "device_type", e.client_ip = "clientIP", e.segment = "segment", e.custom_param = "", e.delivery_server = "", e.refresh_times = "", e.refresh_delay = "", e.retry = "", e.bg_color = "", e.default_image = "", e.default_url = "", e.domain_rewrite = "", e.fail_url = "", e.spot_ssp = "", e.spot_new = ""
                }(r || (r = {})),
                function(e) {
                    e.context_pornstar = "context_pornstar", e.context_category = "context_category", e.context_tag = "context_tag", e.context_page_type = "context_page_type", e.info = "info", e.category = "category", e.search = "search", e.site = "site"
                }(s || (s = {}));
            const o = {
                adBaseURL: `${location.protocol}//{ENV}/{METHOD}`,
                adClassNameContext: "adsbytrafficjunkycontext",
                cookies: {
                    deliveryServer: {
                        name: "TJDeliveryServer"
                    },
                    env: {
                        name: "TJAdsUrl"
                    }
                },
                videoFormats: ["video/mp4", "video/webm", "video/ogg"]
            };
            var a = n(808),
                l = n.n(a);
            class d {}
            d.getEnv = e => {
                const t = a.get(o.cookies.env.name),
                    n = ".trafficjunky.net";
                return t ? `${t}${n}` : e || `ads${n}`
            }, d.getDeliveryServer = () => a.get(o.cookies.deliveryServer.name);
            class c {
                createURL(e, t = !1) {
                    const n = e.specificParams.domain_rewrite;
                    let i = o.adBaseURL;
                    i = i.replace("{ENV}", d.getEnv(n)), i = i.replace("{METHOD}", this.getMethod(e, t)), t ? (i += `?zone_id=${e.spotId}&redirect=1&format=popunder`, i += `&clientType=${encodeURIComponent(String(e.specificParams.platform))}`) : (i += `?data=${encodeURIComponent(`[{"spots":[{"zone":${e.spotId}}]}]`)}`, i += "&clientType=mobile"), i += this.getChannelsParameters(e.channelParams), i += this.getSpecificParameters(e.specificParams, t);
                    const r = d.getDeliveryServer();
                    return r && (i += `&delivery-server=${r}`), n && (i += `&dm=${encodeURIComponent(n)}`), i += `&_=${Date.now()}`, e.specificParams.custom_param && (i += e.specificParams.custom_param), i
                }
                getSpecificParams(e, t) {
                    const n = Object.assign(Object.assign({}, t), e),
                        i = {};
                    for (const e in n) e in r && (i[e] = n[e]);
                    return i
                }
                getChannelParams(e, t) {
                    const n = Object.assign(Object.assign({}, t), e),
                        i = {};
                    for (const e in n) e in s && (i[e] = n[e]);
                    return i
                }
                getAdContextAttributes() {
                    const e = document.querySelector(`meta[name="${o.adClassNameContext}"]`);
                    return e ? h.getDataAttributes(e) : null
                }
                getChannelsParameters(e) {
                    let t = "";
                    if (!e) return t;
                    for (const n in e) s[n] && e[n] && (t += `&channel[${n}]=${encodeURIComponent(e[n])}`);
                    return t
                }
                getSpecificParameters(e, t) {
                    let n = "";
                    for (const i in e) {
                        if (!r[i] || !e[i]) continue;
                        const s = this.getSpecificParameterValue(e, t, i);
                        n += `&${r[i]}=${encodeURIComponent(s)}`
                    }
                    return n
                }
                getSpecificParameterValue(e, t, n) {
                    return "platform" !== n || t || "pc" !== e[n] ? e[n] : "tablet"
                }
                getMethod(e, t) {
                    return "true" === e.specificParams.spot_ssp ? "deep-ssp" : t ? "ads" : "ads_batch"
                }
            }
            class u {
                static log(t, n) {
                    u.logs[t] || (u.logs[t] = []), n && (n.logTime = new Date(Date.now())), u.logs[t].push(n);
                    const i = JSON.parse(JSON.stringify(this.debug()));
                    window.postMessage({
                        debug: i,
                        name: t,
                        type: e.embeddedAdsDebuggerUpdate
                    }, "*")
                }
                static getSpots() {
                    const t = {};
                    for (const n in u.logs) {
                        -1 !== [e.embeddedAdsSpotDefaultLoaded, e.embeddedAdsSpotFailed, e.embeddedAdsSpotLoaded].indexOf(n) && u.populateMapForEvent(n, t)
                    }
                    return u.populateSpots(t)
                }
                static populateSpots(t) {
                    const n = {};
                    for (const i in t) {
                        n[i] || (n[i] = {});
                        const r = t[i][e.embeddedAdsSpotFailed];
                        this.populateSpotsPerRefreshed(n[i], r, "failed");
                        const s = t[i][e.embeddedAdsSpotDefaultLoaded];
                        this.populateSpotsPerRefreshed(n[i], s, "default_loaded");
                        const o = t[i][e.embeddedAdsSpotLoaded];
                        this.populateSpotsPerRefreshed(n[i], o, "loaded")
                    }
                    return this.formatSpots(n)
                }
                static formatSpots(e) {
                    const t = {};
                    for (const n in e) {
                        t[n] = [];
                        for (const i in e[n]) t[n].push(e[n][i])
                    }
                    return t
                }
                static populateMapForEvent(e, t) {
                    for (let n = 0; n < u.logs[e].length; n++) {
                        const i = u.logs[e][n].ad;
                        t[i.refreshed] || (t[i.refreshed] = {}), t[i.refreshed][e] || (t[i.refreshed][e] = {}), t[i.refreshed][e][i.uuid] = {
                            container: u.logs[e][n].container,
                            spotId: i.spotId
                        }
                    }
                }
                static populateSpotsPerRefreshed(e, t, n) {
                    if (t)
                        for (const i in t) e[i] = {
                            container: t[i].container,
                            spotId: t[i].spotId,
                            status: n
                        }
                }
                static getHBSpots() {
                    const e = document.querySelectorAll("script[src*='/ads_batch']");
                    for (let t = 0; t < e.length; t++) {
                        const n = String(e[t].getAttribute("src")),
                            i = u.getHBSpotsFromScript(n);
                        if (i) return i
                    }
                    return null
                }
                static getHBSpotsFromScript(e) {
                    try {
                        if (!e || -1 === e.indexOf("?")) return null;
                        e = e.substring(e.indexOf("?"));
                        const t = new URLSearchParams(e);
                        if (!t.get("hb")) return null;
                        const n = JSON.parse(t.get("data"))[0].spots,
                            i = [];
                        for (let e = 0; e < n.length; e++) i.push(n[e].zone);
                        return i
                    } catch (e) {
                        return null
                    }
                }
            }
            u.logs = {}, u.debug = () => ({
                context: u.adContextAttributes,
                events: u.logs,
                hbSpots: u.getHBSpots(),
                spots: u.getSpots(),
                version: "1.0.7"
            });
            class h {
                static connectionInfo() {
                    return navigator.connection || navigator.mozConnection || navigator.webkitConnection
                }
                static truncateText(e, t) {
                    return e.length > t ? `${e.slice(0,t)}...` : e
                }
            }
            h.createDOMElement = (e, t = {}) => {
                const n = document.createElement(e);
                for (const e in t) n.setAttribute(e, t[e]);
                return n
            }, h.getDataAttributes = e => {
                var t, n;
                const i = [].filter.call(e.attributes, (e => /^data-/.test(e.name))),
                    r = {};
                for (const e in i) {
                    const s = null === (t = i[e].name) || void 0 === t ? void 0 : t.replace("data-", "").replace(/-/g, "_"),
                        o = null === (n = i[e].value) || void 0 === n ? void 0 : n.trim();
                    o && s && (r[s] = h.sanitize(o))
                }
                return r
            }, h.isLeftButton = e => 1 === (e.which || e.button), h.isAdBlock = () => {
                const e = document.createElement("div");
                e.innerHTML = "&nbsp;", e.className = "adsbox";
                let t = !1;
                try {
                    document.body.appendChild(e), t = 0 === document.getElementsByClassName("adsbox")[0].offsetHeight, document.body.removeChild(e)
                } catch (e) {
                    t = !0
                }
                return t || !window.tjEmbeddedAdsLoaded
            }, h.dispatchTjEvent = (t, n) => {
                const i = document.createEvent("Event");
                i.initEvent(t, !1, !0), n && (i.detail = n), document.dispatchEvent(i), u.log(t, n), t === e.embeddedAdsSpotFailed && h.sendFailEvent(n)
            }, h.sendFailEvent = e => {
                var t;
                const n = (new c).getAdContextAttributes();
                if (!n || !n.fail_url) return;
                if (0 === e.status) return;
                const i = new XMLHttpRequest;
                i.open("POST", n.fail_url), i.send(JSON.stringify({
                    pageUrl: window.location.href,
                    retryCounter: e.retried,
                    tjAdData: null !== (t = e.request.response) && void 0 !== t ? t : "",
                    tjAdRequestUrl: e.request.url,
                    tjResponseCode: e.request.status,
                    tjResponseTime: e.request.duration,
                    tjZoneID: e.ad.spotId
                }))
            }, h.getQuality = () => {
                const e = h.connectionInfo();
                return e ? e.downlink < .3 ? t.Low : e.downlink < .7 ? t.Medium : t.High : t.Medium
            }, h.sanitize = e => {
                const t = {
                    "<": "&lt;",
                    ">": "&gt;"
                };
                return e.replace(/[<>]/gi, (e => t[e]))
            }, h.getNearestAvailableQuality = (e, t) => {
                const n = Number(t);
                let i = Object.keys(e);
                if (0 === i.length) return null;
                i = i.filter((t => "progressive" === e[t].delivery)), i = i.filter((t => {
                    const n = e[t];
                    return !!n.type && ["video/mp4", "video/webm", "video/ogg"].includes(n.type)
                }));
                return i.sort(((e, t) => {
                    const i = Number(e),
                        r = Number(t);
                    return isNaN(i) ? 1 : isNaN(r) ? -1 : Math.abs(n - i) - Math.abs(n - r)
                }))[0]
            };
            var p = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class m {
                static dispatchError(t) {
                    m.dispatch(e.embeddedAdsError, null, {
                        error: JSON.stringify(t, Object.getOwnPropertyNames(t))
                    })
                }
                static sendEvent(e) {
                    if (!e) return;
                    const t = new XMLHttpRequest;
                    t.open("GET", e), t.send()
                }
            }
            m.calculateHeightRatio = e => m.getClientWidth() * e / 580, m.calculateWidthRatio = e => m.getClientWidth() * e, m.createInlineStyle = (e, t = !1) => {
                let n = "";
                for (const t in e) {
                    let i = "";
                    ";" !== e[t].substr(e[t].length - 1) && (i = ";"), n += `${t}:${e[t]}${i}`
                }
                return t && (n = n.replace(/!important/g, "").replace(/;/g, "!important;")), n
            }, m.getElementByTag = (e, t) => e.tagName === t.toUpperCase() ? e : e.querySelector(t), m.getElementBySpotId = (e, t) => p(void 0, void 0, void 0, (function*() {
                const n = `.${e}[data-source-id="${t}"], .${e}[data-spot-id="${t}"]`;
                let i = 0;
                for (; !document.querySelector(n);) {
                    if (i++ > 20) return null;
                    yield new Promise((e => requestAnimationFrame(e)))
                }
                return document.querySelector(n)
            })), m.dispatch = (e, t = null, n = {}) => {
                h.dispatchTjEvent(e, m.getEventParams(t, n))
            }, m.getEventParams = (e = null, t = {}) => (e && (t = Object.assign({
                ad: Object.assign({}, e.params),
                channelParams: e.channelParams,
                container: e.containerElement,
                request: Object.assign(Object.assign({}, e.request), {
                    duration: Date.now() - Number(e.request.duration)
                }),
                specificParams: e.specificParams
            }, t)), t), m.getUUID = () => "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (e => {
                const t = 16 * Math.random() | 0;
                return ("x" === e ? t : 3 & t | 8).toString(16)
            })), m.getClientWidth = () => document.documentElement.clientWidth, m.getWindowYPosition = () => {
                let e = 0;
                return pageYOffset ? e = pageYOffset : document.documentElement.clientHeight ? e = document.documentElement.scrollTop : document.body && (e = document.body.scrollTop), e
            }, m.getBrowserInfo = () => {
                var e;
                let t = null,
                    n = !1,
                    i = 0;
                if (navigator.userAgent.search("YaBrowser/") >= 0 || navigator.userAgent.indexOf("Yowser/") >= 0) t = "YANDEX";
                else if (navigator.userAgent.search("Vivaldi/") >= 0) t = "VIVALDI";
                else if (navigator.userAgent.search("SamsungBrowser/") >= 0 || navigator.userAgent.toLowerCase().search("samsung") >= 0) t = "SAMSUNG BROWSER";
                else if (navigator.userAgent.search("Opera") >= 0 || navigator.userAgent.indexOf(" OPR/") >= 0) t = "OPERA";
                else if (navigator.userAgent.search("Edge/") >= 0 || navigator.userAgent.indexOf("Edg/") >= 0 || navigator.userAgent.search("EdgA/") >= 0) t = "EDGE";
                else if (navigator.userAgent.search("EdgiOS/") >= 0) t = "EDGE", n = !0;
                else if (navigator.userAgent.search("MSIE") >= 0) t = "IE";
                else if (navigator.userAgent.search("Chrome") >= 0) t = "CHROME";
                else if (navigator.userAgent.search("CriOS/") >= 0) t = "CHROME", n = !0;
                else if (navigator.userAgent.search("Firefox") >= 0) {
                    const e = navigator.userAgent.match(/Firefox\/([0-9]+)\./);
                    i = e ? parseInt(e[1]) : 0, t = "FIREFOX"
                } else navigator.userAgent.search("FxiOS") >= 0 ? (t = "FIREFOX", n = !0) : navigator.userAgent.search("Safari") >= 0 && -1 === navigator.userAgent.search("Chrome") && (t = "SAFARI");
                return {
                    mobileDevice: null === (e = [/Android/i, /webOS/i, /iPhone/i, /iPad/i, /iPod/i, /BlackBerry/i, /Windows Phone/i].find((e => navigator.userAgent.match(e) ? e : null))) || void 0 === e ? void 0 : e.source,
                    name: t,
                    version: i,
                    flags: {
                        isAnIOSVariantUsingWebkit: n
                    }
                }
            };
            const g = {
                adClassName: "adsbytrafficjunky",
                bottomAdName: "tjBottomAd",
                closeImageURL: `${location.protocol}//static.trafficjunky.com/delivery/img/close.png`,
                cookies: {
                    bottom: {
                        expiry: 48e4,
                        name: "TJBottomClose"
                    },
                    fail: {
                        name: "TJAdsFail"
                    },
                    server: {
                        expiry: 36e5,
                        name: "RLBNSERVERID"
                    }
                },
                defaults: {
                    bg_color: "transparent",
                    platform: "mobile"
                },
                idSync: {
                    scriptUrl: "https://static.trafficjunky.com/invocation/idsync/production/idsync.min.js",
                    sites: ["tube8", "pornhub", "youporn", "redtube", "xtube"]
                },
                inBanLabels: {
                    defaultTargetUrl: "https://www.pornhub.com/information/advertising",
                    filter: {
                        availableWebsites: ["pornhub", "redtube", "tube8", "youporn"],
                        websites: ["pornhub", "redtube", "tube8", "youporn"],
                        zoneIds: []
                    },
                    targetUrls: {
                        pornhub: "/information/advertising",
                        redtube: "/information#advertising",
                        tube8: "/info.html#advertising",
                        youporn: "/information/#advertise"
                    }
                },
                videoDriveBy: {
                    cookieExpiry: 288e5,
                    cookieName: "videoDriveBy",
                    position: "bottom",
                    skipDelay: 5e3,
                    vastProvider: "tj"
                },
                viewabilityOn: !0
            };
            class v {
                static createURL(e, t = !1) {
                    return v.adService.createURL(e, t)
                }
                static getSpecificParams(e, t) {
                    return v.adService.getSpecificParams(e, t)
                }
                static getChannelParams(e, t) {
                    return v.adService.getChannelParams(e, t)
                }
                static getAdContextAttributes() {
                    const e = v.adService.getAdContextAttributes();
                    return u.adContextAttributes = e, e
                }
            }
            v.adService = new c;
            class f {
                constructor(e, t) {
                    this.channelParams = {}, this.specificParams = {}, this.request = {}, this.getParams = (e, t) => ({
                        height: String(e.height),
                        inbanlabel: this.isInBanLabelRequested(e, t),
                        refreshed: 0,
                        spotId: Number(e.source_id || e.spot_id),
                        type: String(e.type),
                        uuid: m.getUUID(),
                        width: String(e.width),
                        windowHeight: e.window_height,
                        windowWidth: e.window_width
                    }), this.setChannelAndSpecificParams = (e, t) => {
                        this.specificParams = v.getSpecificParams(e, t), this.channelParams = v.getChannelParams(e, t);
                        for (const e in g.defaults) this.specificParams[e] || (this.specificParams[e] = g.defaults[e])
                    }, this.isInBanLabelRequested = (e, t) => {
                        var n;
                        const i = void 0 === e.inbanlabel ? null : "true" === e.inbanlabel;
                        if (null !== i) return i;
                        const r = e.type;
                        let s;
                        return (!r || (s = null === (n = null == t ? void 0 : t.hide_inbanlabels_for) || void 0 === n ? void 0 : n.split(",").includes(r), !s)) && null
                    }, this.params = this.getParams(e, t), this.setChannelAndSpecificParams(e, t)
                }
            }
            const b = {
                    "background-color": "#000000",
                    border: "none",
                    display: "block",
                    margin: "0 auto",
                    overflow: "hidden"
                },
                w = {
                    border: "none",
                    display: "block",
                    height: "100%",
                    left: "0",
                    "margin-left": "auto",
                    "margin-right": "auto",
                    position: "absolute",
                    right: "0",
                    top: "0",
                    "vertical-align": "middle",
                    width: "100%"
                },
                y = {
                    overflow: "hidden",
                    position: "relative"
                },
                A = {
                    background: "transparent",
                    margin: "0 auto",
                    overflow: "hidden",
                    position: "relative",
                    "z-index": "9"
                },
                C = {
                    "background-color": "black",
                    color: "#fff",
                    display: "block",
                    "font-size": "12px",
                    "line-height": "1",
                    padding: "5px 0 5px 0",
                    position: "absolute",
                    "text-align": "center",
                    width: "100%",
                    "z-index": "1"
                },
                x = {
                    "align-items": "center",
                    display: "flex",
                    height: "100%",
                    "transform-style": "preserve-3d",
                    width: "100%"
                },
                S = {
                    height: "100vh",
                    left: "0",
                    position: "fixed",
                    right: "0",
                    width: "100%"
                },
                E = e => {
                    const t = "Android" === e.mobileDevice && "FIREFOX" === e.name || ("iPhone" === e.mobileDevice || "iPad" === e.mobileDevice) && ("SAFARI" === e.name || "CHROME" === e.name) ? {
                        top: "0"
                    } : {
                        bottom: "0"
                    };
                    return Object.assign(Object.assign({}, S), t)
                },
                T = {
                    bottom: "0",
                    left: "0",
                    position: "absolute",
                    top: "0",
                    width: "100%"
                },
                j = e => {
                    const t = "iPhone" === e.mobileDevice || "iPad" === e.mobileDevice || "SAFARI" === e.name ? {
                        "clip-path": "inset(0 0)"
                    } : {
                        clip: "rect(0px, auto, auto, 0px)"
                    };
                    return Object.assign(Object.assign({}, T), t)
                },
                M = {
                    "-ms-transform": "translateX(-50%)",
                    bottom: "0px",
                    display: "block",
                    left: "50%",
                    position: "fixed",
                    transform: "translateX(-50%)",
                    "z-index": "9999"
                },
                k = {
                    background: `url(${g.closeImageURL})`,
                    "background-repeat": "no-repeat",
                    cursor: "pointer",
                    height: "20px",
                    position: "absolute",
                    right: "-10px",
                    top: "-10px",
                    width: "20px"
                },
                N = {
                    overflow: "hidden",
                    position: "relative"
                },
                I = {
                    left: "0",
                    position: "absolute",
                    top: "0",
                    width: "100%"
                },
                D = {
                    display: "block",
                    height: "15px",
                    position: "fixed",
                    right: "0",
                    top: "0",
                    width: "15px"
                },
                O = {
                    "background-image": 'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsSAAALEgHS3X78AAACeElEQVRIiWPUmrv5P8MAABZ8VhZpKKDw+248oJoL8VqcbKVDM4uZqGbSULEYb1CTA8x5uRkMRAUYvvz6w7DrxRuG13/+Em9xtIw4g7u6PIb4ImcznE5Zd+UuAzcrC0OVmylcLPjFe4b0XSewWo7VYnEeTgZjeTEMcWxiMDD11FWGclsDFDF1CUEGNwkRhqVPXmKop1oc3/v+g0FakAdDHOQJbIBqFlsLCzCcfYjps6NPX2NVjzWotzx8znDx1XuGSQG2KOJ5Gw7jtPjx9x8MR09cZmgER4k4w9P3XxjWXrrDcPLzV+ItvvX9Jxijg73vPuK0GATUONkZdt1+zFB/4jKDEicHgyQXB061VM1OspwcDK3elnD+2YevGDa8fItV7cgruUiyWJSFmT4Wf/n5G4UfJCdBNcfgtfjg7Sco/DwHQ4Z0JWlw6gWVyfX6qgxbwl3AbFIB3lS9884TBm8dRQzL89DUTfKzYcjbdIR6Pgbl21VnbxI0hIedFWw5FwnBTjBxNV68TdByUFpo33OG4RuOKhAbIKoAAVl+5PErBncVGQZ7VRmwD0Hg6fuvDEfvPWFYfusRuKRDb6NRbDEDNNj3nvrIwHDqKlZ5UOr20ERNDxeevsJpHskFCCglo6dikKUz3SwYpAVRxXHVTAykltVdZtrgVB5mrM5w88V7hotPXzEoiwhibSCAymlcNRNJFsMshQFQ6wKEsQFQYms5dhGveURb/PXnL6LUgRJc7Z5TWKtVsiwGpeyLL94xZFnpYcQlA9SXK8/eZFh85zHOliUyIKvvBEpcKvw84PbU11+/Ge58+EKwkYAOyGoIgBINvoRDEDAwMAAA8jPdWcn5JXoAAAAASUVORK5CYII=")',
                    "background-position": "-15px 0",
                    "background-size": "cover",
                    "box-shadow": "0 0 3px #333",
                    cursor: "pointer",
                    height: "15px",
                    position: "absolute",
                    right: "0",
                    top: "0",
                    width: "15px"
                },
                L = {
                    background: "#299cb2",
                    color: "#fff",
                    display: "block",
                    "font-family": "sans-serif",
                    "font-size": "10px",
                    height: "15px",
                    "line-height": "15px",
                    padding: "0",
                    position: "absolute",
                    "text-align": "center",
                    top: "0",
                    transition: "left 1s",
                    width: "100px",
                    "z-index": "-1"
                };
            class P {}
            P.fixSrcDoc = e => {
                var t, n, i;
                if ("srcdoc" in document.createElement("iframe")) return;
                if ("IFRAME" !== e.tagName && (e = e.querySelector("iframe")), !e) return;
                const r = e,
                    s = null == r ? void 0 : r.getAttribute("srcdoc");
                s && (null === (t = r.contentWindow) || void 0 === t || t.document.open(), null === (n = r.contentWindow) || void 0 === n || n.document.write(s), null === (i = r.contentWindow) || void 0 === i || i.document.close())
            }, P.fixMobileVideoAd = e => {
                if (!e) return e;
                const t = e.indexOf('<div class="adtool_video_ad"');
                return -1 !== t && (e = `${e.substr(0,t)}\n\t\t\t<script src='//cdn11.contentabc.com/delivery/mobile_video/adtool_mobile_video_player_min.js'><\/script>\n\t\t\t${e.substr(t)}`), e
            };
            var _ = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class B extends f {
                constructor(t, n, i) {
                    super(n, i), this.createWithDefaultIfFail = (t, n) => _(this, void 0, void 0, (function*() {
                        const i = Number(this.specificParams.retry) || 0;
                        this.request.defaultAd = !1;
                        for (let n = 0; n < i + 1; n++) {
                            const i = yield t();
                            if (i) return i;
                            m.dispatch(e.embeddedAdsSpotFailed, this, {
                                retried: n
                            })
                        }
                        return this.createDefaultAd(n)
                    })), this.createDefaultAd = e => {
                        if (!this.specificParams.default_image || !this.specificParams.default_url) return null;
                        (e = e || Object.assign({
                            height: this.params.height,
                            width: this.params.width
                        }, b))["background-color"] = this.specificParams.bg_color;
                        const t = h.createDOMElement("img", {
                                src: this.specificParams.default_image,
                                style: m.createInlineStyle(e)
                            }),
                            n = h.createDOMElement("a", {
                                "data-embeddedadsfallback": "true",
                                "data-height": this.params.height,
                                "data-spot-id": this.params.spotId,
                                "data-width": this.params.width,
                                href: this.specificParams.default_url,
                                target: "_blank"
                            });
                        return n.appendChild(t), this.request.defaultAd = !0, n
                    }, this.containerElement = t, this.refresh()
                }
                refresh() {
                    const e = Number(this.specificParams.refresh_delay),
                        t = Number(this.specificParams.refresh_times);
                    if (!e || !t) return;
                    let n = 0;
                    this.interval = window.setInterval((() => {
                        ++n >= t && window.clearInterval(this.interval), this.params.refreshed++, "function" == typeof this.revert && this.revert(), this.run()
                    }), 1e3 * e)
                }
                reload() {
                    window.clearInterval(this.interval), "function" == typeof this.revert && this.revert(), this.run(), this.refresh()
                }
                run() {
                    return _(this, void 0, void 0, (function*() {
                        if (!this.checkIfCreatable()) return !1;
                        this.request.duration = Date.now();
                        const t = yield this.create();
                        if (!t || !document.body.contains(this.containerElement)) return "function" == typeof this.revert && this.revert(), !1;
                        this.insertIntoDOM(t), this.removeInvocationCode(), this.containerElement = t, P.fixSrcDoc(t);
                        const n = this.request.defaultAd ? e.embeddedAdsSpotDefaultLoaded : e.embeddedAdsSpotLoaded;
                        return m.dispatch(n, this), !0
                    }))
                }
                checkIfCreatable() {
                    return !(!this.containerElement || !this.containerElement.parentNode) && document.body.contains(this.containerElement)
                }
                insertIntoDOM(e) {
                    this.containerElement && this.containerElement.parentNode && this.containerElement.parentNode.insertBefore(e, this.containerElement.nextSibling)
                }
                removeInvocationCode() {
                    this.containerElement && this.containerElement.parentNode && this.containerElement.parentNode.removeChild(this.containerElement)
                }
            }
            class F {
                static wasClosed() {
                    return Boolean(a.get(g.cookies.bottom.name))
                }
                static isTestFail() {
                    return Boolean(a.get(g.cookies.fail.name))
                }
                static close() {
                    const e = new Date(Date.now() + g.cookies.bottom.expiry);
                    a.set(g.cookies.bottom.name, "1", {
                        expires: e,
                        secure: !0
                    })
                }
            }
            F.setDeliveryServer = e => {
                if (!e) return;
                const t = new Date(Date.now() + g.cookies.server.expiry);
                a.set(g.cookies.server.name, e, {
                    expires: t,
                    secure: !0
                })
            };
            class R {
                static getHBAd(e) {
                    const t = window.tjPreloadAds[e.params.spotId],
                        n = F.isTestFail() ? null : t.response;
                    return e.request.duration = Date.now() - Number(t.duration), e.request.url = t.url, e.request.status = t.status, e.request.response = t.response, delete window.tjPreloadAds[e.params.spotId], (new ze).load(), new Promise((e => e(n)))
                }
                static verifyResponse(e, t, n) {
                    return t.request.url = n, t.request.status = e.status, t.request.response = e.responseText, !window.XDomainRequest && 200 !== e.status || !e.responseText || F.isTestFail() ? null : e.responseText
                }
            }
            R.makeRequest = e => window.tjPreloadAds && window.tjPreloadAds[e.params.spotId] ? R.getHBAd(e) : new Promise((t => {
                const n = window.XDomainRequest ? new window.XDomainRequest : new XMLHttpRequest,
                    i = v.createURL({
                        channelParams: e.channelParams,
                        specificParams: e.specificParams,
                        spotId: e.params.spotId
                    });
                n.onload = n.onerror = n.ontimeout = () => {
                    t(R.verifyResponse(n, e, i))
                }, n.open("GET", i), n.timeout = 1e4, n.send()
            })), R.makeXMLRequest = e => new Promise((t => {
                const n = window.XDomainRequest ? new window.XDomainRequest : new XMLHttpRequest;
                n.onload = n.onerror = n.ontimeout = () => {
                    t(200 === n.status ? n.responseText : null)
                }, n.open("GET", e), n.timeout = 1e4, n.send()
            }));
            const V = Object.freeze({
                debugMode: !0,
                videoViewedTimeThreshold: 2e3,
                viewedSizeThreshold: .5,
                viewedTimeThreshold: 1e3
            });
            class z {
                static getElementId(e) {
                    if (e.id) return e.setAttribute("data-avm-id", e.id), e.id;
                    if (null !== e.getAttribute("data-avm-id")) return e.getAttribute("data-avm-id");
                    let t = Math.random().toString(36).substring(7);
                    return t = `${e.tagName}-${t}`, e.setAttribute("data-avm-id", t), t
                }
                static getConfig() {
                    return V
                }
            }
            class $ {
                constructor() {
                    this.config = z.getConfig()
                }
            }
            class U {
                constructor(e, t, n, i) {
                    this.timer = {
                        elapsedTime: 0,
                        startTime: 0
                    }, this.locked = !1, this.element = e, this.url = t, this.config = z.getConfig(), this.id = z.getElementId(e), this.isVideo = i, this.params = n
                }
                sendAdsViewedEvent(e) {
                    const t = `${e}?${this.getUrlParams()}`,
                        n = h.createDOMElement("iframe", {
                            src: t,
                            style: "display: none"
                        });
                    document.body.appendChild(n), this.unObserve()
                }
                sendEvent() {
                    this.locked ? this.unObserve() : this.url && (this.sendAdsViewedEvent(this.url), this.locked = !0)
                }
                getUrlParams() {
                    const e = Object.assign({
                        action: "ad_view"
                    }, this.params);
                    return Object.keys(e).map((t => `${t}=${e[t]}`)).join("&")
                }
            }
            class H extends U {
                constructor(e, t, n, i, r) {
                    super(e, t, n, i), this.isIntersecting = !1, this.onUnobserve = r, this.viewedThreshold = this.isVideo ? this.config.videoViewedTimeThreshold : this.config.viewedTimeThreshold
                }
                unObserve() {
                    var e;
                    null === (e = this.onUnobserve) || void 0 === e || e.call(this, this.id)
                }
                onIntersectingChanged(e, t) {
                    !this.isIntersecting && e ? this.monitor(this.viewedThreshold - this.timer.elapsedTime) : this.isIntersecting && !e && (this.timer.elapsedTime += t - this.timer.startTime), this.timer.startTime = t, this.isIntersecting = e
                }
                monitor(e) {
                    setTimeout((() => {
                        this.isIntersecting && this.sendEvent()
                    }), e)
                }
            }
            class W extends $ {
                constructor() {
                    super(), this.register = (e, t, n, i = !1) => {
                        if (!t) return;
                        const r = z.getElementId(e);
                        if (!this.adObservers.has(r)) {
                            e.setAttribute("avm-id", r);
                            const s = new H(e, t, n, i, (() => {
                                this.observer.unobserve(e), this.adObservers.delete(r)
                            }));
                            this.adObservers.set(r, s), this.observer.observe(e)
                        }
                    }, this.onAdsIntersected = e => {
                        e.forEach((e => {
                            const t = e.target.getAttribute("avm-id"),
                                n = t ? this.adObservers.get(t) : null;
                            null == n || n.onIntersectingChanged(e.isIntersecting, e.time)
                        }))
                    }, this.observer = new IntersectionObserver(this.onAdsIntersected, {
                        threshold: this.config.viewedSizeThreshold
                    }), this.adObservers = new Map
                }
            }
            var Y;
            ! function(e) {
                e[e.IN_VIEW = 0] = "IN_VIEW", e[e.ABOVE_VIEW = 1] = "ABOVE_VIEW", e[e.BELOW_VIEW = 2] = "BELOW_VIEW", e[e.TOP_BOTTOM_TRUNCATED = 3] = "TOP_BOTTOM_TRUNCATED", e[e.TOP_TRUNCATED = 4] = "TOP_TRUNCATED", e[e.BOTTOM_TRUNCATED = 5] = "BOTTOM_TRUNCATED", e[e.NOT_IN_VIEW = 6] = "NOT_IN_VIEW"
            }(Y || (Y = {}));
            class q extends U {
                constructor(e, t, n, i, r) {
                    super(e, t, n, i), this.check = () => {
                        const e = this.determineVisibility(this.element);
                        this.isViewing(e) ? (0 === this.timer.elapsedTime && -1 === this.timer.startTime && (this.timer.startTime = Date.now()), this.timer.elapsedTime = Date.now() - this.timer.startTime) : (this.timer.elapsedTime = 0, this.timer.startTime = -1), this.timer.elapsedTime > this.viewedThreshold && this.sendEvent()
                    }, this.viewedThreshold = this.isVideo ? this.config.videoViewedTimeThreshold : this.config.viewedTimeThreshold, this.onUnobserve = r
                }
                unObserve() {
                    var e;
                    null === (e = this.onUnobserve) || void 0 === e || e.call(this, this.id)
                }
                isViewing(e) {
                    return [Y.TOP_TRUNCATED, Y.BOTTOM_TRUNCATED].includes(e.state) ? e.value <= -this.config.viewedSizeThreshold : e.state === Y.IN_VIEW && e.value >= this.config.viewedSizeThreshold
                }
                determineVisibility(e) {
                    const t = e.getBoundingClientRect().top,
                        n = e.getBoundingClientRect().bottom,
                        i = t - n;
                    return t >= 0 && n <= window.innerHeight ? {
                        state: Y.IN_VIEW,
                        value: 1
                    } : t < 0 && n <= window.innerHeight ? {
                        state: Y.TOP_TRUNCATED,
                        value: n / i
                    } : t >= 0 && n > window.innerHeight ? {
                        state: Y.BOTTOM_TRUNCATED,
                        value: (window.innerHeight - t) / i
                    } : {
                        state: Y.NOT_IN_VIEW,
                        value: 0
                    }
                }
            }
            class J extends $ {
                constructor() {
                    super(), this.interval = null, this.monitor = () => {
                        this.observers.forEach((e => {
                            e.check()
                        }))
                    }, this.removeObserver = e => {
                        this.observers.delete(e), 0 === this.observers.size && null !== this.interval && (window.clearInterval(this.interval), this.interval = null)
                    }, this.startMonitoring = () => {
                        null === this.interval && (this.interval = window.setInterval(this.monitor, 89))
                    }, this.observers = new Map
                }
                register(e, t, n, i) {
                    if (!t) return;
                    const r = z.getElementId(e);
                    this.observers.has(r) || (this.observers.set(r, new q(e, t, n, i, (() => {
                        this.removeObserver(r)
                    }))), this.startMonitoring())
                }
            }
            class Q {
                static getInstance() {
                    return Q.instance || (Q.instance = "IntersectionObserver" in window ? new W : new J), Q.instance
                }
            }
            var G = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class X {
                static create(e, t, n, i = !0) {
                    return G(this, void 0, void 0, (function*() {
                        let r = n;
                        return r || (r = yield X.getJSONFromContent(e)), X.createSync(e, t, r, i)
                    }))
                }
                static createSync(e, t, n, i = !0) {
                    const r = X.createIframe(e, t);
                    return X.inject(r, e, n, i)
                }
                static inject(e, t, n, i = !0) {
                    const r = n;
                    if (!r) return null;
                    let s = X.getHTMLFromJSON(r);
                    if (!s) return null;
                    t.request.data = r;
                    const o = m.getBrowserInfo();
                    return "CHROME" === o.name && o.flags.isAnIOSVariantUsingWebkit && (s = this.applyIOSChromeFixToHtmlString(s)), e.setAttribute("srcdoc", s), i && this.attachViewabilityListener(e, r, t), e
                }
                static applyIOSChromeFixToHtmlString(e) {
                    const t = document.createElement("div");
                    t.innerHTML = e;
                    return t.querySelectorAll("a").forEach((e => {
                        "_blank" === e.getAttribute("target") && e.getAttribute("href") && (e.removeAttribute("target"), e.setAttribute("onclick", `event.preventDefault(); window.open('${e.getAttribute("href")}')`))
                    })), t.innerHTML
                }
                static attachViewabilityListener(e, t, n) {
                    var i, r;
                    const s = Object.assign({}, t);
                    s.viewEventUrl = (null === (i = n.specificParams) || void 0 === i ? void 0 : i.domain_rewrite) ? `https://${n.specificParams.domain_rewrite}/fla/log` : "https://ads.trafficjunky.net/fla/log", g.viewabilityOn && Q.getInstance().register(e, s.viewEventUrl, {
                        ad_id: null == s ? void 0 : s.ad_id,
                        campaign_id: null == s ? void 0 : s.campaign_id,
                        initial_zone_id: null === (r = n.params) || void 0 === r ? void 0 : r.spotId,
                        member_id: null == s ? void 0 : s.member_id,
                        zone_id: null == s ? void 0 : s.zone_id
                    })
                }
            }
            X.wrap = (e, t, n) => {
                const i = X.createIframe(e, n);
                return i.setAttribute("srcdoc", t.outerHTML), i
            }, X.createIframe = (e, t) => {
                (t = t || Object.assign({}, b))["background-color"] = e.specificParams.bg_color;
                return h.createDOMElement("iframe", {
                    allowtransparency: "true",
                    "data-embeddedads": "true",
                    "data-spot-id": e.params.spotId,
                    height: e.params.height,
                    marginheight: "0",
                    marginwidth: "0",
                    scrolling: "no",
                    style: m.createInlineStyle(t, !0),
                    width: e.params.width
                })
            }, X.getJSONFromContent = e => G(void 0, void 0, void 0, (function*() {
                const t = yield R.makeRequest(e);
                if (!t) return null;
                try {
                    return JSON.parse(t)[0]
                } catch (e) {
                    return null
                }
            })), X.getHTMLFromJSON = e => {
                let t = "";
                return e.full_html ? t = e.full_html : e.html && (t = e.html), P.fixMobileVideoAd(t)
            };
            class Z {
                constructor(e, t) {
                    this.lastPlayPos = 0, this.currentPlayPos = 0, this.bufferingDetected = !1, this.video = "VIDEO" === e.tagName ? e : e.firstChild, this.mediaFiles = t, this.setQuality(h.getQuality()), Object.keys(this.mediaFiles).length > 1 && setInterval(this.checkBuffering, 50)
                }
                checkBuffering() {
                    if (!this.video) return;
                    this.currentPlayPos = this.video.currentTime;
                    this.isBuffering(.03) && (this.bufferingDetected = !0), this.isBuffering(.03, !0) && (this.bufferingDetected = !1), this.lastPlayPos = this.currentPlayPos
                }
                isBuffering(e, t = !1) {
                    return !!this.video.paused && (t ? this.bufferingDetected && this.currentPlayPos > this.lastPlayPos + e : !this.bufferingDetected && this.currentPlayPos < this.lastPlayPos + e)
                }
                setQuality(e) {
                    let t = this.mediaFiles[e];
                    if (!t) {
                        const n = h.getNearestAvailableQuality(this.mediaFiles, e);
                        if (!n) return;
                        t = this.mediaFiles[n]
                    }
                    t && (this.video.src = t.url)
                }
            }
            class K {}
            var ee;
            K.skipButton = (e, t) => m.createInlineStyle({
                    "align-items": "center",
                    "background-color": "rgba(0, 0, 0, 0.5)",
                    color: "white",
                    cursor: "default",
                    display: "flex",
                    "font-family": "sans-serif",
                    "font-size": "14px",
                    "font-weight": "normal",
                    height: `${e}`,
                    "justify-content": "center",
                    "min-width": `${t}`,
                    padding: "0 10px 0",
                    position: "absolute",
                    right: "0",
                    "text-align": "center",
                    top: "0",
                    transition: "opacity .3s",
                    "user-select": "none"
                }), K.video = m.createInlineStyle({
                    height: "100%",
                    position: "absolute",
                    right: "0"
                }), K.expandButton = m.createInlineStyle({
                    "background-color": "rgba(0, 0, 0, 0.3)",
                    bottom: "0",
                    cursor: "pointer",
                    display: "none",
                    height: "20px",
                    padding: "8px",
                    position: "absolute",
                    width: "20px"
                }), K.wrapper = m.createInlineStyle({
                    "background-color": "#e91e62",
                    height: "100%"
                }), K.adBanner = m.createInlineStyle({
                    float: "right",
                    height: "100%",
                    position: "relative"
                }), K.adBannerImg = (e, t, n) => m.createInlineStyle({
                    "background-image": `url('${e}')`,
                    "background-repeat": "no-repeat",
                    "background-size": "contain",
                    height: `${t}px`,
                    position: "absolute",
                    right: "0",
                    top: "0",
                    width: `${n}px`
                }), K.adContainer = (e, t) => {
                    const n = {
                        "background-color": "#3b3b3b",
                        height: "240px",
                        left: `${e+2}px`,
                        position: "fixed",
                        width: "426px",
                        "z-index": "99"
                    };
                    return window.innerWidth < 430 && (n.height = "180px", n.width = "320px"), "top" === t ? n.top = "20px" : n.bottom = "20px", m.createInlineStyle(n)
                },
                function(e) {
                    e.AdaptiveVideo = "adaptive_video", e.Video = "video", e.Iframe = "iframe", e.Image = "image", e.VideoBanner = "video_banner", e.Static = "static", e.PrerollVideo = "preroll_video", e.Native = "native"
                }(ee || (ee = {}));
            class te {
                constructor(e) {
                    this.registerEvents = (e, t) => {
                        this.events.push({
                            callback: t,
                            time: e
                        }), this.events.sort(((e, t) => e.time > t.time ? 1 : e.time < t.time ? -1 : 0))
                    }, this.registerFirstQuartile = e => (this.registerEvents(.25, e), this), this.registerMidpoint = e => (this.registerEvents(.5, e), this), this.registerThirdQuartile = e => (this.registerEvents(.75, e), this), this.startListening = () => {
                        this.video.addEventListener("timeupdate", (() => {
                            if (this.events.length <= 0) return;
                            const e = this.video.currentTime / this.video.duration,
                                t = this.events[0];
                            e > t.time && (t.callback(), this.events.shift())
                        }))
                    }, this.video = e, this.events = []
                }
            }
            var ne = null !== l() && void 0 !== l() ? l() : class {
                static set(e, t, n) {
                    const i = [`${e}=${null!=t?t:""}`];
                    if (null == n ? void 0 : n.expires) {
                        const e = n.expires instanceof Date ? n.expires.getTime() - (new Date).getTime() : n.expires;
                        i.push("; max-age=" + e / 1e3)
                    }(null == n ? void 0 : n.secure) && i.push("; secure"), document.cookie = i.join("")
                }
                static get(e) {
                    const t = `${e}=`;
                    if (document.cookie.length > 0) {
                        let e = document.cookie.indexOf(t);
                        if (-1 !== e) {
                            e += t.length;
                            const n = document.cookie.indexOf(";", e);
                            return document.cookie.substring(e, -1 === n ? document.cookie.length : n)
                        }
                    }
                    return null
                }
            };
            const ie = {
                cancelAnimationFrame: () => {},
                requestAnimationFrame: () => 0
            };
            if (window) {
                const e = ["ms", "moz", "webkit", "o"],
                    t = window;
                ie.requestAnimationFrame = e.map((e => t[`${e}RequestAnimationFrame`])).reduce(((e, t) => e || t), window.requestAnimationFrame), ie.cancelAnimationFrame = e.map((e => t[`${e}CancelAnimationFrame`] || t[`${e}CancelRequestAnimationFrame`])).reduce(((e, t) => e || t), window.cancelAnimationFrame)
            }
            if (!ie.requestAnimationFrame) {
                let e = 0;
                ie.requestAnimationFrame = t => {
                    const n = (new Date).getTime(),
                        i = Math.max(0, 16 - (n - e)),
                        r = window.setTimeout((() => {
                            t(n + i)
                        }), i);
                    return e = n + i, r
                }, ie.cancelAnimationFrame || (ie.cancelAnimationFrame = e => clearTimeout(e))
            }
            const re = ie.requestAnimationFrame;
            ie.cancelAnimationFrame;
            class se {
                getValue(e, t, n = null) {
                    let i = null;
                    const r = e.querySelectorAll(t);
                    for (let e = 0; e < r.length; e++) {
                        const t = r[e],
                            s = this.strip(t.textContent);
                        if (s && (!n || n && s !== n)) {
                            i = s;
                            break
                        }
                    }
                    return i
                }
                strip(e) {
                    return e ? e.replace("<![CDATA[", "").replace("]]>", "").trim() : null
                }
            }
            var oe;
            ! function(e) {
                e.Start = "start", e.FirstQuartile = "firstQuartile", e.Midpoint = "midpoint", e.ThirdQuartile = "thirdQuartile", e.Complete = "complete", e.Mute = "mute", e.Unmute = "unmute", e.Pause = "pause", e.Resume = "resume", e.Fullscreen = "fullscreen", e.Skip = "skip", e.Click = "click", e.Impression = "impression"
            }(oe || (oe = {}));
            class ae extends se {
                get(e) {
                    const t = {},
                        n = e.querySelectorAll("TrackingEvents Tracking");
                    for (let e = 0; e < n.length; e++) {
                        const i = n[e],
                            r = i.getAttribute("event"),
                            s = i,
                            o = this.strip(s.textContent);
                        this.addEventUrl(t, r, o)
                    }
                    return 0 !== Object.keys(t).length ? t : null
                }
                addEventUrl(e, t, n) {
                    t && n && oe[t.charAt(0).toUpperCase() + t.slice(1)] && (e[t] || (e[t] = []), e[t].push(n))
                }
            }
            class le extends se {
                get(e) {
                    if (!(e = e.querySelectorAll("VideoClicks")[0])) return null;
                    const t = this.getValue(e, "VideoClicks ClickThrough");
                    if (!t) return null;
                    const n = [],
                        i = e.querySelectorAll("VideoClicks ClickTracking");
                    for (let e = 0; e < i.length; e++) {
                        const t = i[e],
                            r = this.strip(t.textContent);
                        r && n.push(r)
                    }
                    return {
                        clickThrough: t,
                        clickTracking: n
                    }
                }
            }
            class de extends se {
                get(e) {
                    const t = {},
                        n = e.querySelectorAll("MediaFiles MediaFile");
                    for (let e = 0; e < n.length; e++) {
                        const i = n[e],
                            r = i,
                            s = this.strip(r.textContent),
                            a = Number(i.getAttribute("height")),
                            l = i.getAttribute("type"),
                            d = l && o.videoFormats.includes(l);
                        s && d && (t[a] = {
                            bitrate: Number(i.getAttribute("bitrate")),
                            delivery: i.getAttribute("delivery"),
                            height: a,
                            type: l,
                            url: s,
                            width: Number(i.getAttribute("width"))
                        })
                    }
                    return t
                }
            }
            class ce extends se {
                constructor() {
                    super(...arguments), this.getWithVideoClicksEvents = e => {
                        e.events || (e.events = {});
                        let t = e.events[oe.Click] || [];
                        return t = [...t, ...e.videoClicks.clickTracking], e.events[oe.Click] = t, e
                    }
                }
                get(e) {
                    const t = [],
                        n = e.querySelectorAll("Creatives Creative");
                    for (let e = 0; e < n.length; e++) {
                        let i = n[e];
                        const r = i.getAttribute("AdID");
                        if (i = i.querySelectorAll("Linear")[0], !i) continue;
                        const s = this.getCreative(i, r);
                        s && t.push(this.getWithVideoClicksEvents(s))
                    }
                    return t.length ? t : null
                }
                getCompanion(e) {
                    if (!e.querySelector("Creatives Creative CompanionAds Companion")) return null;
                    const t = this.getValue(e, "StaticResource");
                    return t ? {
                        clickThrough: this.getValue(e, "CompanionClickThrough"),
                        clickTracking: this.getValue(e, "CompanionClickTracking"),
                        staticResource: t
                    } : null
                }
                getCreative(e, t) {
                    const n = (new le).get(e),
                        i = (new de).get(e);
                    return n && Object.keys(i).length ? {
                        duration: this.getValue(e, "Duration"),
                        events: (new ae).get(e),
                        id: t,
                        mediaFiles: i,
                        videoClicks: n
                    } : null
                }
            }
            class ue extends se {
                get(e) {
                    const t = new ce,
                        n = t.get(e),
                        i = t.getCompanion(e);
                    return n ? {
                        adSystem: this.getValue(e, "AdSystem"),
                        companion: i,
                        creatives: n
                    } : null
                }
            }
            var he = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class pe {}
            pe.getVAST = (e, t) => null == t ? Promise.resolve(null) : "adtool" === e.provider && e.url ? pe.getAdtoolVAST(e.url) : Promise.resolve(pe.getTJVAST(null == t ? void 0 : t.full_html)), pe.getTJVAST = e => {
                if (!e) return null;
                const t = (new DOMParser).parseFromString(e, "application/xml").querySelectorAll("InLine")[0];
                return t ? (new ue).get(t) : null
            }, pe.getAdtoolVAST = e => he(void 0, void 0, void 0, (function*() {
                if (!e) return null;
                const t = yield R.makeXMLRequest(e);
                if (null == t) return null;
                const n = (new DOMParser).parseFromString(t, "application/xml").querySelectorAll("InLine")[0];
                return n ? (new ue).get(n) : null
            })), pe.getOptions = (e, t) => {
                const n = m.calculateHeightRatio,
                    i = m.calculateWidthRatio;
                return Object.assign(Object.assign({}, t), {
                    canSkip: !0,
                    imageDivisionAt: i(.75),
                    initSkipAd: !1,
                    initialAdPosition: e,
                    playAdVideo: !1,
                    reachedBanner: !1,
                    skipAd: !0,
                    skipButtonHeight: "36px",
                    skipButtonWidth: "28%",
                    smallBannerHeight: n(99),
                    smallBannerWidth: i(.25)
                })
            }, pe.dispatchEvents = e => {
                e && e.forEach((e => m.sendEvent(e)))
            }, pe.hideVolumeControl = e => {
                const t = document.createElement("STYLE");
                t.innerHTML = `\n\t\t\tvideo#${e}::-webkit-media-controls-volume-slider {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t\t\n\t\t\tvideo#${e}::-webkit-media-controls-mute-button {\n\t\t\t\tdisplay:none;\n\t\t\t}\n\t\t`, document.head.appendChild(t)
            }, pe.triggerFullScreen = e => {
                (e.requestFullscreen || e.mozRequestFullScreen || e.webkitRequestFullscreen || e.msRequestFullscreen).call(e)
            }, pe.getNewPosition = (e, t) => e > t ? e - 10 < t ? e - (t + e) : e - 10 : e + 10 > t ? e + (t - e) : e + 10, pe.getExpandButton = () => {
                const e = h.createDOMElement("img", {
                        src: "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDQ2OS4zMzMgNDY5LjMzMyIgZmlsbD0iI0ZGRiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDY5LjMzMyA0NjkuMzMzOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsMEgxMC42NjdDNC43NzEsMCwwLDQuNzcxLDAsMTAuNjY3VjE2MGMwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3SDMyYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjcKCQkJCVY0Mi42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzE3MC42NjcsNC43NzEsMTY1Ljg5NiwwLDE2MCwweiIvPgoJCQk8cGF0aCBmaWxsPSIjRkZGIiBkPSJNNDU4LjY2NywwSDMwOS4zMzNjLTUuODk2LDAtMTAuNjY3LDQuNzcxLTEwLjY2NywxMC42NjdWMzJjMCw1Ljg5Niw0Ljc3MSwxMC42NjcsMTAuNjY3LDEwLjY2N2gxMTcuMzMzVjE2MAoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdoMjEuMzMzYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42NjdWMTAuNjY3QzQ2OS4zMzMsNC43NzEsNDY0LjU2MywwLDQ1OC42NjcsMHoiLz4KCQkJPHBhdGggZmlsbD0iI0ZGRiIgZD0iTTQ1OC42NjcsMjk4LjY2N2gtMjEuMzMzYy01Ljg5NiwwLTEwLjY2Nyw0Ljc3MS0xMC42NjcsMTAuNjY3djExNy4zMzNIMzA5LjMzM2MtNS44OTYsMC0xMC42NjcsNC43NzEtMTAuNjY3LDEwLjY2NwoJCQkJdjIxLjMzM2MwLDUuODk2LDQuNzcxLDEwLjY2NywxMC42NjcsMTAuNjY3aDE0OS4zMzNjNS44OTYsMCwxMC42NjctNC43NzEsMTAuNjY3LTEwLjY2N1YzMDkuMzMzCgkJCQlDNDY5LjMzMywzMDMuNDM3LDQ2NC41NjMsMjk4LjY2Nyw0NTguNjY3LDI5OC42Njd6Ii8+CgkJCTxwYXRoIGZpbGw9IiNGRkYiIGQ9Ik0xNjAsNDI2LjY2N0g0Mi42NjdWMzA5LjMzM2MwLTUuODk2LTQuNzcxLTEwLjY2Ny0xMC42NjctMTAuNjY3SDEwLjY2N0M0Ljc3MSwyOTguNjY3LDAsMzAzLjQzNywwLDMwOS4zMzN2MTQ5LjMzMwoJCQkJYzAsNS44OTYsNC43NzEsMTAuNjY3LDEwLjY2NywxMC42NjdIMTYwYzUuODk2LDAsMTAuNjY3LTQuNzcxLDEwLjY2Ny0xMC42Njd2LTIxLjMzMwoJCQkJQzE3MC42NjcsNDMxLjQzOCwxNjUuODk2LDQyNi42NjcsMTYwLDQyNi42Njd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",
                        style: m.createInlineStyle({
                            fill: "#FFFFFF"
                        }),
                        width: "100%"
                    }),
                    t = h.createDOMElement("div", {
                        style: K.expandButton
                    });
                return t.appendChild(e), t
            };
            var me, ge = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class ve {}
            me = ve, ve.getVAST = (e, t) => null == t ? Promise.resolve(null) : "adtool" === e.provider && e.url && me.isValidAdtool(e.url) ? me.getAdtoolVAST(e.url) : Promise.resolve(me.getTJVAST(null == t ? void 0 : t.full_html)), ve.isValidAdtool = e => {
                const t = e.split("/")[2];
                return void 0 !== t && null !== t.match(/adtng.com/i)
            }, ve.getTJVAST = e => {
                if (!e) return null;
                const t = (new DOMParser).parseFromString(e, "application/xml").querySelectorAll("InLine")[0];
                return t ? (new ue).get(t) : null
            }, ve.getAdtoolVAST = e => ge(void 0, void 0, void 0, (function*() {
                if (!e) return null;
                const t = yield R.makeXMLRequest(e);
                if (null == t) return null;
                const n = (new DOMParser).parseFromString(t, "application/xml").querySelectorAll("InLine")[0];
                return n ? (new ue).get(n) : null
            }));
            var fe = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class be extends B {
                constructor(e, t, n) {
                    super(e, t, n), this.screenWidth = document.documentElement.clientWidth, this.skipButtonCountingStarted = !1, this.createAd = () => fe(this, void 0, void 0, (function*() {
                        try {
                            if (ne.get(g.videoDriveBy.cookieName)) return null;
                            const e = yield X.getJSONFromContent(this);
                            if (!e || e.media_type !== ee.PrerollVideo) return null;
                            const t = yield ve.getVAST(this.vastProvider, e);
                            return t ? (this.vast = t, this.initAdParameters(e), setTimeout((() => this.initBindings()), 1e3), this.buildAd()) : null
                        } catch (e) {
                            return null
                        }
                    })), this.create = () => fe(this, void 0, void 0, (function*() {
                        return new Promise((e => {
                            const t = () => {
                                window.removeEventListener("scroll", t), this.createAd().then((t => {
                                    e(t)
                                }))
                            };
                            window.addEventListener("scroll", t)
                        }))
                    })), this.closeAd = e => {
                        var t;
                        this.slide(this.elements.adContainer, !1), this.elements.videoEl.pause(), pe.dispatchEvents(null === (t = this.vast.creatives[0].events) || void 0 === t ? void 0 : t[e ? "skip" : "complete"]), this.setCookie()
                    }, this.setCookie = () => {
                        ne.set(g.videoDriveBy.cookieName, "1", {
                            expires: this.options.cookieExpiry / 864e5
                        })
                    }, this.initAdParameters = e => {
                        this.options = pe.getOptions(this.screenWidth, g.videoDriveBy), this.overrideAttributes(), this.request.data = Object.assign(Object.assign({}, this.request.data), {
                            ad_id: e.ad_id,
                            campaign_id: e.campaign_id,
                            media_type: e.media_type,
                            member_id: e.member_id
                        })
                    }, this.initBindings = () => {
                        const {
                            videoEl: e,
                            expandButton: t
                        } = this.elements;
                        window.addEventListener("resize", this.handleResize), this.addVideoEvents(e), t.addEventListener("click", (() => pe.triggerFullScreen(this.elements.videoEl))), this.handleScroll(), window.addEventListener("scroll", (() => this.handleScroll())), window.addEventListener("touchemove", (() => this.handleScroll()))
                    }, this.addVideoEvents = e => {
                        new te(e).registerFirstQuartile((() => {
                            var e;
                            pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.firstQuartile)
                        })).registerMidpoint((() => {
                            var e;
                            pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.midpoint)
                        })).registerThirdQuartile((() => {
                            var e;
                            pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.thirdQuartile)
                        })).startListening(), e.addEventListener("ended", (() => this.closeAd(!1)))
                    }, this.handleResize = () => {
                        this.justResized = !0;
                        let e = document.documentElement.clientWidth;
                        this.isVisible && (e -= this.elements.adContainer.clientWidth), this.elements.adContainer.style.left = `${e}px`, setTimeout((() => {
                            this.justResized = !1
                        }), 200)
                    }, this.slide = (e, t) => {
                        this.options.reachedBanner = !0;
                        let n = e.offsetLeft;
                        window.requestAnimationFrame = re;
                        const i = t ? document.documentElement.clientWidth - e.clientWidth : document.documentElement.clientWidth + e.clientWidth,
                            r = () => {
                                const s = e.offsetLeft;
                                if (t ? s <= i : s >= i) this.isVisible = t, e.style.left = `${i}px`, this.options.playAdVideo || (this.options.playAdVideo = !0, this.setCookie());
                                else {
                                    const i = t ? e.offsetLeft - e.clientWidth : e.offsetLeft + e.clientWidth;
                                    n = pe.getNewPosition(n, i), e.style.left = `${n}px`, re(r)
                                }
                            };
                        re(r), this.startSkipButtonCounting()
                    }, this.handleScroll = () => {
                        if (this.justResized) return;
                        m.getWindowYPosition() > 5 && !this.options.reachedBanner && this.slide(this.elements.adContainer, !0)
                    }, this.getSkipButtonContainer = e => {
                        const {
                            skipButtonHeight: t,
                            skipButtonWidth: n
                        } = this.options, i = h.createDOMElement("div", {
                            style: K.skipButton(t, n)
                        }), r = h.createDOMElement("span", {
                            style: "display: inline-block;vertical-align: middle;height: 100%;"
                        });
                        return i.appendChild(r), i.appendChild(e), i
                    }, this.getSkipButton = () => h.createDOMElement("span"), this.startSkipButtonCounting = () => {
                        if (this.elements.skipButton && !this.skipButtonCountingStarted && this.options.canSkip && this.options.skipDelay > 0) {
                            let e = Math.round(this.options.skipDelay / 1e3);
                            const t = setInterval((() => {
                                this.elements.skipButton ? (this.elements.skipButton.innerHTML = ` Skip Ad in ${--e}s`, e < 1 && (this.elements.skipButton.innerHTML = " Skip Ad", this.elements.skipButton.addEventListener("click", (() => this.closeAd(!0))), this.elements.skipButton.style.cursor = "pointer", clearInterval(t))) : clearInterval(t)
                            }), 1e3)
                        }
                    }, this.getVideoContainer = () => {
                        const e = "vdb-player",
                            t = h.createDOMElement("a", {
                                href: this.vast.creatives[0].videoClicks.clickThrough,
                                style: K.wrapper,
                                target: "_blank"
                            });
                        t.onclick = () => {
                            var e;
                            return pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.click)
                        };
                        const n = h.createDOMElement("video", Object.assign({
                            style: K.video
                        }, {
                            autoplay: !0,
                            disableRemotePlayback: !0,
                            muted: !0,
                            playsInline: !0
                        }));
                        n.id = e, n.onplaying = () => {
                            var e;
                            return pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.start)
                        }, n.onfullscreenchange = () => {
                            var e;
                            document.fullscreenElement && pe.dispatchEvents(null === (e = this.vast.creatives[0].events) || void 0 === e ? void 0 : e.fullscreen)
                        }, pe.hideVolumeControl(e);
                        const i = this.vast.creatives[0].mediaFiles;
                        for (const e in i) {
                            const t = i[e];
                            n.appendChild(h.createDOMElement("source", {
                                src: t.url,
                                type: t.type
                            }))
                        }
                        return new Z(n, this.vast.creatives[0].mediaFiles), n.load(), n.muted = !0, t.appendChild(n), t
                    }, this.getAdBanner = () => {
                        var e, t;
                        const n = h.createDOMElement("div", {
                                style: K.adBanner
                            }),
                            {
                                smallBannerHeight: i,
                                smallBannerWidth: r
                            } = this.options,
                            s = null === (e = this.vast.companion) || void 0 === e ? void 0 : e.staticResource;
                        if (!s) return null;
                        const o = h.createDOMElement("img", {
                                style: K.adBannerImg(s, i, r)
                            }),
                            a = h.createDOMElement("a", {
                                href: null === (t = this.vast.companion) || void 0 === t ? void 0 : t.clickThrough,
                                target: "_blank"
                            });
                        return a.appendChild(o), n.appendChild(a), n
                    }, this.buildAd = () => {
                        const e = h.createDOMElement("div", {
                                style: K.adContainer(++this.screenWidth, this.options.position)
                            }),
                            t = this.getVideoContainer(),
                            n = t.firstChild;
                        e.appendChild(t);
                        const i = this.getAdBanner();
                        let r;
                        if (i && e.appendChild(i), this.options.canSkip) {
                            r = this.getSkipButton();
                            const t = this.getSkipButtonContainer(r);
                            e.appendChild(t)
                        }
                        const s = pe.getExpandButton();
                        return e.appendChild(s), this.elements = {
                            adContainer: e,
                            expandButton: s,
                            skipButton: r,
                            videoEl: n
                        }, e
                    }, this.specificAttrs = t, this.vastProvider = {
                        provider: "adtool" === this.specificAttrs.vast_provider ? "adtool" : "tj",
                        url: this.specificAttrs.vast_url
                    }
                }
                overrideAttributes() {
                    if (this.options.canSkip = "false" !== this.specificAttrs.can_skip, this.specificAttrs.position && (this.options.position = this.specificAttrs.position), this.specificAttrs.cookie_expiry) {
                        const e = Number(this.specificAttrs.cookie_expiry);
                        isNaN(e) || (this.options.cookieExpiry = e)
                    }
                    const e = Number(this.specificAttrs.skip_delay);
                    isNaN(e) || (this.options.skipDelay = e)
                }
            }
            class we {}
            we.shouldShowLabel = e => {
                var t, n, i, r, s, o, a, l;
                if (!1 === e.params.inbanlabel) return !1;
                if (!0 === e.params.inbanlabel || !g.inBanLabels.filter || !(null === (t = g.inBanLabels.filter) || void 0 === t ? void 0 : t.websites) || !(null === (n = e.channelParams) || void 0 === n ? void 0 : n.site)) return !0;
                const d = null === (i = e.channelParams) || void 0 === i ? void 0 : i.site;
                if (!(null === (r = g.inBanLabels.filter) || void 0 === r ? void 0 : r.websites.find((e => e === d)))) return !0;
                let c = !1;
                return (null === (s = g.inBanLabels.filter) || void 0 === s ? void 0 : s.availableWebsites) && (c = Boolean(null === (o = g.inBanLabels.filter) || void 0 === o ? void 0 : o.availableWebsites.find((e => e === d)))), (null === (a = g.inBanLabels.filter) || void 0 === a ? void 0 : a.zoneIds) && (c = c || Boolean(null === (l = g.inBanLabels.filter) || void 0 === l ? void 0 : l.zoneIds.find((t => t === e.params.spotId)))), c
            }, we.getTargetUrl = e => {
                var t, n, i;
                const r = null === (t = e.channelParams) || void 0 === t ? void 0 : t.site;
                return r && null !== (i = null === (n = g.inBanLabels.targetUrls) || void 0 === n ? void 0 : n[r]) && void 0 !== i ? i : g.inBanLabels.defaultTargetUrl
            }, we.wrapWithInBanLabel = (e, t) => {
                var n;
                if (!e || !we.shouldShowLabel(t)) return e;
                const i = h.createDOMElement("div", {
                    style: m.createInlineStyle(L)
                });
                i.innerText = "Ads by TrafficJunky", i.className = "tj-inban-tooltip";
                const r = h.createDOMElement("div", {
                    style: m.createInlineStyle(O)
                });
                r.appendChild(i), r.className = "tj-inban-icon";
                const s = h.createDOMElement("style");
                s.innerHTML = "\n\t\t\t.tj-inban-tooltip {\n\t\t\t\tleft: 15px;\n\t\t\t}\n\t\t\t\n\t\t\t.tj-inban-icon:hover .tj-inban-tooltip {\n\t\t\t\tleft: -99px;\n\t\t\t}\n\t\t";
                const o = h.createDOMElement("a", {
                    href: we.getTargetUrl(t),
                    target: "_blank"
                });
                o.appendChild(r);
                const a = h.createDOMElement("div", {
                    style: m.createInlineStyle(D)
                });
                return a.appendChild(o), a.appendChild(s), e.setAttribute("srcdoc", `${null===(n=e.getAttribute("srcdoc"))||void 0===n?void 0:n.split("</body>")[0]}${a.outerHTML}</body></html>`), e
            };
            class ye {
                constructor(e, t) {
                    this.create = e => we.wrapWithInBanLabel(X.createSync(this.baseAd, e, this.json), this.baseAd), this.baseAd = e, this.json = t
                }
            }
            class Ae extends ye {
                constructor() {
                    super(...arguments), this.create = () => {
                        try {
                            const e = this.stringToVAST();
                            if (!e) return null;
                            this.vast = e, this.baseAd.request.data = this.json;
                            const t = this.createVideo(),
                                n = this.createOverlay(),
                                i = this.createWrapper(t, n);
                            return new Z(t, this.vast.creatives[0].mediaFiles), we.wrapWithInBanLabel(X.wrap(this.baseAd, i), this.baseAd)
                        } catch (e) {
                            return null
                        }
                    }, this.getEventScript = (e, t) => {
                        if (!t) return null;
                        const n = h.createDOMElement("script");
                        return n.innerHTML = `document.getElementById('${e}').onclick = function() { \n\t\t\t\t\t\t\t\tvar xhr = new XMLHttpRequest(); \n\t\t\t\t\t\t\t\txhr.open('GET', '${t}'); \n\t\t\t\t\t\t\t\txhr.send(); \n\t\t\t\t\t\t    };`, n
                    }
                }
                createWrapper(e, t) {
                    const {
                        width: n,
                        height: i
                    } = this.baseAd.params, r = m.createInlineStyle(Object.assign(Object.assign({}, N), {
                        height: i,
                        width: n
                    })), s = h.createDOMElement("div", {
                        style: r
                    });
                    return s.appendChild(e), t && s.appendChild(t), s
                }
                createOverlay() {
                    if (!this.vast.companion) return null;
                    const {
                        staticResource: e,
                        clickThrough: t,
                        clickTracking: n
                    } = this.vast.companion, i = h.createDOMElement("img", {
                        src: e,
                        style: m.createInlineStyle(I)
                    });
                    if (!t) return i;
                    const r = h.createDOMElement("a", {
                            href: t,
                            id: "overlay",
                            target: "_blank"
                        }),
                        s = this.getEventScript("overlay", n);
                    return r.appendChild(i), s && r.appendChild(s), r
                }
                createVideo() {
                    const e = h.createDOMElement("video", {
                        autoplay: !0,
                        disableRemotePlayback: !0,
                        loop: !0,
                        muted: "muted",
                        playsinline: "",
                        preload: "auto",
                        style: "width: 100%"
                    });
                    e.muted = !0, e.volume = 0;
                    const {
                        clickThrough: t,
                        clickTracking: n
                    } = this.vast.creatives[0].videoClicks, i = h.createDOMElement("a", {
                        href: t,
                        id: "video",
                        target: "_blank"
                    }), r = this.getEventScript("video", n[0]);
                    return i.appendChild(e), r && i.appendChild(r), i
                }
                stringToVAST() {
                    const e = (new DOMParser).parseFromString(this.json.full_html, "application/xml").querySelectorAll("InLine")[0];
                    return e ? (new ue).get(e) : null
                }
            }
            class Ce {
                constructor() {
                    this.create = (e, t) => t.media_type === ee.VideoBanner ? new Ae(e, t) : new ye(e, t)
                }
            }
            var xe = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Se extends B {
                constructor() {
                    super(...arguments), this.getIframeAd = (e, t) => xe(this, void 0, void 0, (function*() {
                        const n = e || (yield X.getJSONFromContent(this));
                        if (!n) return null;
                        const i = (new Ce).create(this, n);
                        return i ? i.create(t) : null
                    }))
                }
                create() {
                    return xe(this, void 0, void 0, (function*() {
                        return yield this.createWithDefaultIfFail(this.getIframeAd)
                    }))
                }
            }
            var Ee = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Te extends Se {
                constructor() {
                    super(...arguments), this.style = Object.assign(Object.assign({}, w), {
                        "min-height": `${this.params.height}`
                    }), this.create = () => Ee(this, void 0, void 0, (function*() {
                        const e = yield X.getJSONFromContent(this);
                        if ((null == e ? void 0 : e.media_type) === ee.VideoBanner) return this.createWithDefaultIfFail((() => this.getIframeAd(e)));
                        const t = yield this.createWithDefaultIfFail((() => Ee(this, void 0, void 0, (function*() {
                            const t = yield X.create(this, this.style, e);
                            return we.wrapWithInBanLabel(t, this)
                        }))), this.style);
                        return t ? this.createResponsiveWrapper(t) : null
                    })), this.createResponsiveWrapper = e => {
                        const t = Number(this.params.width.slice(0, -2)),
                            n = Number(this.params.height.slice(0, -2)),
                            i = Math.floor(n / t * 100),
                            r = m.createInlineStyle(Object.assign(Object.assign({}, y), {
                                "padding-top": `${i}%`
                            }), !0),
                            s = h.createDOMElement("div", {
                                style: r
                            });
                        return s.appendChild(e), s
                    }
                }
            }
            var je = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Me extends B {
                constructor() {
                    super(...arguments), this.createBottomAdElement = () => je(this, void 0, void 0, (function*() {
                        const e = yield this.createWithDefaultIfFail((() => X.create(this, void 0, void 0, !1)));
                        if (!e) return null;
                        const t = this.createContainer(),
                            n = m.createInlineStyle({
                                height: `${this.params.height}`,
                                width: `${this.params.width}`
                            }),
                            i = h.createDOMElement("div", {
                                style: n
                            });
                        return i.appendChild(this.createCloseButton(t)), i.appendChild(e), t.appendChild(i), t
                    })), this.createCloseButton = e => {
                        const t = h.createDOMElement("div");
                        return t.setAttribute("style", m.createInlineStyle(k)), t.onclick = () => {
                            document.body.removeChild(e), F.close()
                        }, t
                    }, this.createContainer = () => {
                        const e = g.bottomAdName,
                            t = h.createDOMElement("div", {
                                id: e
                            });
                        return t.setAttribute("style", m.createInlineStyle(M)), t
                    }
                }
                create() {
                    return je(this, void 0, void 0, (function*() {
                        return window.tjBottomAdLoaded = !0, yield this.createBottomAdElement()
                    }))
                }
                insertIntoDOM(e) {
                    document.body.appendChild(e)
                }
                checkIfCreatable() {
                    return !F.wasClosed() && !window.tjBottomAdLoaded && super.checkIfCreatable()
                }
                revert() {
                    delete window.tjBottomAdLoaded
                }
            }
            var ke = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Ne extends Se {
                constructor() {
                    super(...arguments), this.create = () => ke(this, void 0, void 0, (function*() {
                        const e = yield X.getJSONFromContent(this);
                        return e ? (this.jsonContent = e, yield this.createWithDefaultIfFail(this.createParallaxAd)) : null
                    })), this.createParallaxAd = () => ke(this, void 0, void 0, (function*() {
                        const e = yield this.createContainer(), t = m.createInlineStyle({
                            height: `${this.params.height}`,
                            width: `${this.params.width}`
                        }), n = h.createDOMElement("div", {
                            style: t
                        });
                        return e.appendChild(n), e
                    })), this.createContainer = () => ke(this, void 0, void 0, (function*() {
                        var e, t;
                        const n = h.createDOMElement("div"),
                            i = h.createDOMElement("span", {
                                style: m.createInlineStyle(C)
                            });
                        i.innerText = "Ad by TrafficJunky";
                        const r = h.createDOMElement("a", {
                            href: "https://trafficjunky.com",
                            style: "display: block",
                            target: "_blank"
                        });
                        r.appendChild(i), n.setAttribute("style", m.createInlineStyle(Object.assign(Object.assign({}, A), {
                            height: null !== (e = this.params.windowHeight) && void 0 !== e ? e : "300px",
                            width: null !== (t = this.params.windowWidth) && void 0 !== t ? t : "300px"
                        }))), n.insertAdjacentElement("afterbegin", r);
                        const s = yield this.createContent();
                        return n.insertAdjacentElement("beforeend", s), n
                    })), this.createContent = () => ke(this, void 0, void 0, (function*() {
                        const e = m.getBrowserInfo(),
                            t = h.createDOMElement("div", {
                                style: m.createInlineStyle(j(e))
                            }),
                            n = h.createDOMElement("div", {
                                style: m.createInlineStyle(E(e))
                            }),
                            i = h.createDOMElement("div", {
                                style: m.createInlineStyle(x)
                            }),
                            r = yield this.getIframeAd(this.jsonContent);
                        return r && (i.insertAdjacentElement("beforeend", r), n.insertAdjacentElement("afterbegin", i), t.insertAdjacentElement("afterbegin", n)), t.className = "parallax-content", t
                    }))
                }
            }
            class Ie {
                constructor() {
                    const e = document.createElement("style");
                    this.element = e
                }
                insertRule(e) {
                    this.element.innerHTML += e
                }
            }
            var De = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Oe extends Error {}
            class Le extends B {
                constructor(e, t, n) {
                    super(e, t, n), this.style = Object.assign(Object.assign({}, w), {
                        "min-height": `${this.params.height}`
                    }), this.getNativeParams = (e, t) => {
                        var n, i, r, s, o, a, l, d, c, u, h;
                        const p = String(e.type),
                            m = this.findTheme(null !== (n = null == t ? void 0 : t.site) && void 0 !== n ? n : null);
                        if ("native" !== p) throw new Error;
                        return Object.assign(Object.assign({}, this.getParams(e, null != t ? t : null)), {
                            adBadgeBackground: null !== (i = e.ad_badge_background) && void 0 !== i ? i : m.adBadgeBackground,
                            adBadgeColor: null !== (r = e.ad_badge_color) && void 0 !== r ? r : m.adBadgeColor,
                            adBadgeFont: null !== (s = e.ad_badge_font) && void 0 !== s ? s : m.adBadgeFont,
                            brandNameColor: null !== (o = e.brand_name_color) && void 0 !== o ? o : m.brandNameColor,
                            brandNameHoverColor: null !== (a = e.brand_name_hover_color) && void 0 !== a ? a : m.brandNameHoverColor,
                            brandNameFont: null !== (l = e.brand_name_font) && void 0 !== l ? l : m.brandNameFont,
                            titleColor: null !== (d = e.title_color) && void 0 !== d ? d : m.titleColor,
                            titleHoverColor: null !== (c = e.title_hover_color) && void 0 !== c ? c : m.titleHoverColor,
                            titleFont: null !== (u = e.title_font) && void 0 !== u ? u : m.titleFont,
                            loadingBarColor: null !== (h = e.loading_bar_color) && void 0 !== h ? h : m.loadingBarColor,
                            type: p
                        })
                    }, this.create = () => De(this, void 0, void 0, (function*() {
                        return yield this.createWithDefaultIfFail(this.createNativeAd)
                    })), this.parseNativeAdJson = e => {
                        try {
                            const t = JSON.parse(e.full_html);
                            if (! function(e) {
                                    const t = Object.keys(e);
                                    return t.includes("title") && t.includes("brandName") && t.includes("url") && t.includes("creative_url") && t.includes("tracking_image_url")
                                }(t)) throw new Oe("Native Ad content does not match interface");
                            return Object.assign(Object.assign({}, e), t)
                        } catch (e) {
                            throw new Oe("Native Ad content is not valid JSON")
                        }
                    }, this.createNativeAd = () => De(this, void 0, void 0, (function*() {
                        var e, t;
                        try {
                            const e = yield X.getJSONFromContent(this);
                            if (!e || (t = e).media_type !== ee.Native && t.media_type !== ee.Image) return null;
                            this.jsonContent = this.parseNativeAdJson(e), this.request.data = this.jsonContent
                        } catch (e) {
                            return null
                        }
                        const n = parseInt(this.params.height, 10) / parseInt(this.params.width, 10) * 100,
                            i = m.createInlineStyle({
                                "max-width": this.params.width,
                                "padding-bottom": `${n}%`,
                                position: "relative"
                            }),
                            r = h.createDOMElement("div", {
                                style: i
                            }),
                            s = this.createIframe(),
                            o = this.createTrackingImageHTMLString(),
                            a = this.createThumbnailHTMLString(),
                            l = this.createTitleContainerHTMLString(),
                            d = this.createBrandNameContainerHTMLString();
                        return this.stylesheet.insertRule("\n            a {\n                text-decoration: none;\n                color: inherit;\n            }\n        "), s.srcdoc = `\n            <html>\n                <head>\n                    ${null===(e=this.stylesheet)||void 0===e?void 0:e.element.outerHTML}\n                </head>\n                <body>\n                    ${o}\n                    ${a}\n                    ${l}\n                    ${d}\n                </body>\n            </html>\n        `, r.appendChild(s), r
                    })), this.createThumbnailHTMLString = () => (this.stylesheet.insertRule(`\n            .thumbnail__container {\n                position: relative; \n                margin-bottom: 0.4em;\n            }\n            .thumbnail__container video {\n                z-index: -1;\n            }\n            .thumbnail__container:hover video {\n                z-index: 100;\n            }\n            .thumbnail__container:hover .thumbnail__loading-bar {\n                display: block;\n            }\n            .thumbnail__link {\n                display: block;\n            }\n            .thumbnail__loading-bar {\n                background-color: ${this.params.loadingBarColor};\n                position: absolute;\n                top: 0;\n                left: 0;\n                height: 4px;\n                width: 0%;\n                z-index: 105;\n                display: none;\n                transition: width 0.1s linear;\n            }\n        `), `\n            <div class="thumbnail__container">\n              <a href="${this.jsonContent.url}" target="_blank" class="thumbnail__link" rel="nofollow noopener">\n                ${this.createCreativeImageHTMLString()}\n                ${this.createThumbnailPreviewVideoHTMLString()}\n              </a>\n              ${this.createThumbnailScriptHTMLString()}\n            </div>\n        `), this.createCreativeImageHTMLString = () => (this.stylesheet.insertRule("\n            .thumbnail__creative-image {\n                display: block;\n                width: 100%; \n            }\n        "), `<img src="${this.jsonContent.creative_url}" class="thumbnail__creative-image"/>`), this.createTrackingImageHTMLString = () => (this.stylesheet.insertRule("\n            .tracking-pixel {\n                position: absolute;\n                visibility: hidden;\n                z-index: -1000;\n            }\n        "), `<img src="${this.jsonContent.tracking_image_url}" class="tracking-pixel"/>`), this.createThumbnailPreviewVideoHTMLString = () => this.shouldShowVideoPreview ? (this.stylesheet.insertRule("\n            .thumbnail__preview-video {\n                width: 100%;\n                height: 100%;\n                position: absolute;\n                top: 0;\n                left: 0;\n                object-fit: cover;\n            }\n        "), `\n            <div class="thumbnail__loading-bar"></div>\n            <video\n                class="thumbnail__preview-video"\n                src="${this.jsonContent.preview_video_url}"\n                preload="none"\n                muted>\n            </video>\n        `) : "", this.createThumbnailScriptHTMLString = () => {
                        if (!this.shouldShowVideoPreview) return "";
                        const e = h.createDOMElement("script");
                        return e.innerHTML = `\n            (${function(){const e=document.querySelector(".thumbnail__container"),t=document.querySelector("video"),n=document.querySelector(".thumbnail__loading-bar");e&&t&&n&&(e.addEventListener("mouseover",(()=>{t.currentTime=0,n.style.width="2%",t.play()})),e.addEventListener("mouseout",(()=>{t.pause()})),t.addEventListener("progress",(()=>{const e=t.buffered,i=t.duration,r=e.end(0);r&&(n.style.width=r/i*100+"%")})),t.addEventListener("canplaythrough",(()=>{n.style.display="none"})))}.toString()})()\n        `, e.outerHTML
                    }, this.createTitleContainerHTMLString = () => {
                        var e, t, n;
                        return this.stylesheet.insertRule(`\n            .title {\n                color: ${null!==(e=this.params.titleColor)&&void 0!==e?e:""};\n                font: ${null!==(t=this.params.titleFont)&&void 0!==t?t:""};\n                margin: 0.2em 0 0.6rem;\n            }\n            \n            .title:hover {\n                color: ${null!==(n=this.params.titleHoverColor)&&void 0!==n?n:""};\n            }\n        `), `\n            <h3 class="title">\n                <a href="${this.jsonContent.url}" target="_blank" title="${this.jsonContent.title}" rel="nofollow noopener">\n                    ${h.truncateText(this.jsonContent.title,87)}\n                </a>\n            </h3>\n        `
                    }, this.createBrandNameContainerHTMLString = () => {
                        var e, t, n, i, r, s;
                        return this.stylesheet.insertRule(`\n            .brand__container {\n                display: flex;\n                align-items: center;\n            }            \n            \n            .brand {\n                color: ${null!==(e=this.params.brandNameColor)&&void 0!==e?e:""};\n                font: ${null!==(t=this.params.brandNameFont)&&void 0!==t?t:""};\n            }\n            \n            .brand:hover {\n                color: ${null!==(n=this.params.brandNameHoverColor)&&void 0!==n?n:""};\n            }\n            \n            .brand__badge {\n                background: ${null!==(i=this.params.adBadgeBackground)&&void 0!==i?i:""};\n                border-radius: 2px;\n                color: ${null!==(r=this.params.adBadgeColor)&&void 0!==r?r:""};\n                font: ${null!==(s=this.params.adBadgeFont)&&void 0!==s?s:""};\n                margin: 0 0.5em 0 0;\n                padding: 0.2em 0.2em;\n            }\n        `), `\n            <div class="brand__container">\n                <a href="${we.getTargetUrl(this)}" target="_blank">\n                    <span class="brand__badge">\n                        Ad\n                    </span>\n                </a>\n                <a href="${this.jsonContent.url}" target="_blank" title="${this.jsonContent.brandName}" rel="nofollow noopener">\n                    <span class="brand">${h.truncateText(this.jsonContent.brandName,25)}</span>\n                </a>\n            </div> \n        `
                    }, this.createIframe = () => {
                        const e = X.createIframe(this, {
                            border: "none",
                            height: "100%",
                            left: "0",
                            "max-height": this.params.height,
                            position: "absolute",
                            top: "0",
                            width: "100%"
                        });
                        return X.attachViewabilityListener(e, this.jsonContent, this), e
                    }, this.findTheme = e => {
                        const t = Object.freeze({
                            adBadgeBackground: "#368cf3",
                            adBadgeColor: "#FFFFFF",
                            adBadgeFont: "bold 12px sans-serif",
                            brandNameColor: "#a8aeb6",
                            brandNameFont: "14px sans-serif",
                            brandNameHoverColor: "#bfc5d1",
                            loadingBarColor: "#368cf3",
                            titleColor: "#bfc5d1",
                            titleFont: "15px sans-serif",
                            titleHoverColor: "#a8aeb6"
                        });
                        return "pornhub" === e ? Object.assign(Object.assign({}, t), {
                            adBadgeBackground: "#ff9000",
                            adBadgeColor: "#000000",
                            brandNameHoverColor: "#ff9000",
                            loadingBarColor: "#ff9000",
                            titleHoverColor: "#ff9000"
                        }) : t
                    }, this.params = this.getNativeParams(t, n), this.stylesheet = new Ie
                }
                get shouldShowVideoPreview() {
                    var e;
                    return null === (e = this.jsonContent) || void 0 === e ? void 0 : e.preview_video_url
                }
            }
            var Pe = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class _e extends Se {
                create() {
                    const e = Object.create(null, {
                        create: {
                            get: () => super.create
                        }
                    });
                    return Pe(this, void 0, void 0, (function*() {
                        const t = yield e.create.call(this);
                        return t && (t.style.setProperty("position", "absolute"), t.style.setProperty("left", "-9999px"), t.style.setProperty("right", "-9999px")), t
                    }))
                }
            }
            class Be {
                constructor() {
                    this.create = (e, t, n) => "bottom" === t.type ? new Me(e, t, n) : "skin" === t.type ? new _e(e, t, n) : "native" === t.type ? new Le(e, t, n) : this.isResponsive(t, n) ? new Te(e, t, n) : "video-drive-by" === t.type ? new be(e, t, n) : "scrollable" === t.type ? new Ne(e, t, n) : new Se(e, t, n), this.isResponsive = (e, t) => {
                        if ("responsive" !== e.type) return !1;
                        const n = e.info || (null == t ? void 0 : t.info);
                        if (!n) return !0;
                        let i = !0;
                        try {
                            i = "partner" !== JSON.parse(n).content_type
                        } catch (e) {}
                        return i
                    }
                }
            }
            var Fe = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class Re {
                constructor() {
                    this.sync = e => Fe(this, void 0, void 0, (function*() {
                        if (this.verify(e) && !window.tjIdSyncSynced && !this.checkIsContextForbidsCookies(e)) {
                            window.tjIdSyncSynced = !0;
                            try {
                                const e = yield this.get();
                                if (!e) return;
                                e.set_TJ_uid().fp_get().sync()
                            } catch (e) {}
                        }
                    })), this.get = () => Fe(this, void 0, void 0, (function*() {
                        return new Promise((e => {
                            if (window.idsync) return e(window.idsync);
                            const t = document.createElement("script");
                            t.defer = !0, t.src = `${g.idSync.scriptUrl}?v=${this.getCacheVersion()}`, t.onload = t.onerror = () => e(window.idsync), document.body.insertAdjacentElement("beforeend", t)
                        }))
                    })), this.getCacheVersion = () => {
                        const e = new Date;
                        return new Date(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0).getTime()
                    }, this.verify = e => {
                        if (!e) return !1;
                        const t = e.site,
                            n = "publisher" === e.invocation_type;
                        return !(-1 === g.idSync.sites.indexOf(t) && !n) && -1 === window.navigator.userAgent.indexOf("MSIE")
                    }
                }
                checkIsContextForbidsCookies(e) {
                    return "1" === new URLSearchParams(null == e ? void 0 : e.custom_param).get("noc")
                }
            }
            var Ve = function(e, t, n, i) {
                return new(n || (n = Promise))((function(r, s) {
                    function o(e) {
                        try {
                            l(i.next(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function a(e) {
                        try {
                            l(i.throw(e))
                        } catch (e) {
                            s(e)
                        }
                    }

                    function l(e) {
                        var t;
                        e.done ? r(e.value) : (t = e.value, t instanceof n ? t : new n((function(e) {
                            e(t)
                        }))).then(o, a)
                    }
                    l((i = i.apply(e, t || [])).next())
                }))
            };
            class ze {
                constructor() {
                    this.idSyncService = new Re, this.preload = () => {
                        if (!window.tjPreloadAds) return;
                        const e = v.getAdContextAttributes();
                        for (const t in window.tjPreloadAds) "response" in window.tjPreloadAds[t] && (window.tjPreloadAds[t].loaded || (window.tjPreloadAds[t].loaded = !0, new Promise((() => Ve(this, void 0, void 0, (function*() {
                            const n = yield m.getElementBySpotId(g.adClassName, t);
                            n && this.run(n, e)
                        }))))))
                    }, this.load = () => {
                        const e = document.getElementsByClassName(g.adClassName),
                            t = v.getAdContextAttributes(),
                            n = [];
                        this.idSyncService.sync(t);
                        for (let i = 0; i < e.length; i++) {
                            const r = this.run(e[i], t);
                            r && n.push(r)
                        }
                        return Promise.all(n)
                    }, this.reload = e => {
                        const t = ze.ads[e];
                        if (t)
                            for (let e = 0; e < t.length; e++) t[e].reload()
                    }, this.run = (e, t) => {
                        const n = h.getDataAttributes(e);
                        if (!this.canCreate(n)) return null;
                        e.setAttribute("data-loading", "true");
                        const i = (new Be).create(e, n, t);
                        return ze.ads[i.params.spotId] || (ze.ads[i.params.spotId] = []), ze.ads[i.params.spotId].push(i), i.run()
                    }, this.verifyAttributes = e => !(!this.verify(e, ["source_id"]) && !this.verify(e, ["spot_id"])) && ("video-drive-by" === e.type || this.verify(e, ["height", "width"])), this.verify = (e, t) => {
                        let n = !0;
                        for (let i = 0; i < t.length; i++) e[t[i]] || (n = !1);
                        return n
                    }, this.setDeliveryServer = () => {
                        const e = v.getAdContextAttributes();
                        F.setDeliveryServer(null == e ? void 0 : e.delivery_server)
                    }
                }
                init() {
                    window.tjLoadEmbeddedAds = this.load, window.tjPreloadEmbeddedAds = this.preload, window.tjReloadEmbeddedAdsSpot = this.reload, window.tjDebug = u.debug, this.setDeliveryServer()
                }
                canCreate(e) {
                    if (e.loading) return !1;
                    if (!this.verifyAttributes(e)) return !1;
                    const t = e.spot_id;
                    return !(window.tjPreloadAds && window.tjPreloadAds[t] && !window.tjPreloadAds[t].loaded)
                }
            }

            function $e() {
                Array.prototype.includes || Object.defineProperty(Array.prototype, "includes", {
                    value: function(e) {
                        for (let t = 0; t < this.length; t++)
                            if (this[t] === e) return !0;
                        return !1
                    }
                }), window.Map || Object.defineProperty(window, "Map", {
                    value: function() {
                        const e = {};
                        this.has = function(t) {
                            return void 0 !== e[t]
                        }, this.get = function(t) {
                            return e[t]
                        }, this.set = function(t, n) {
                            e[t] = n
                        }, this.delete = function(t) {
                            delete e[t]
                        }
                    }
                })
            }
            ze.ads = {};
            class Ue {
                constructor() {
                    this.embeddedAdsService = new ze
                }
                init() {
                    if (window.tjEmbeddedAdsLoaded) return !1;
                    $e();
                    try {
                        window.tjEmbeddedAdsLoaded = !0, this.sendLoadedEvent(), this.launch()
                    } catch (e) {
                        return m.dispatchError(e), !1
                    }
                    return !0
                }
                launch() {
                    this.embeddedAdsService.init(), this.embeddedAdsService.preload(), "loading" !== document.readyState ? this.embeddedAdsService.load() : document.addEventListener("DOMContentLoaded", (() => {
                        try {
                            this.embeddedAdsService.load()
                        } catch (e) {
                            m.dispatchError(e)
                        }
                    }))
                }
                sendLoadedEvent() {
                    let t = {};
                    if (void 0 !== window.tjEmbeddedAdsDuration) {
                        const e = void 0 !== window.tjPreloadAds ? Object.assign({}, window.tjPreloadAds) : null;
                        t = {
                            duration: Date.now() - window.tjEmbeddedAdsDuration,
                            tjPreloadAds: e
                        }
                    }
                    h.dispatchTjEvent(e.embeddedAdsLoaded, t)
                }
            }(new Ue).init()
        }(), i
    }()
}));